[container]
base_image = "ubuntu:25.04"
user = "code"
home_dir = "/home/code"
work_dir = "/home/code/work"

[docker]
container_runtime = "podman"
enable_gpu = true
gpu_driver = "all"
interactive = true
remove_on_exit = true
extra_args = []

[[docker.volumes]]
host = "$HOME/.claude"
container = "/home/code/.claude"
readonly = false

[[docker.volumes]]
host = "$HOME/.claude.json"
container = "/home/code/.claude.json"
readonly = false

[[docker.tmpfs]]
path = "/home/code/work/build"
readonly = true
size = "1m"

[environment]
TERM = "xterm-256color"
CC = "clang-18"
CXX = "clang++-18"

[git]
user_name = ""
user_email = ""

[claude]
skip_permissions = true
max_turns = 99999999
extra_args = []

[dependencies]
apt = [
    "python3",
    "python3-pip",
    "python3-dev",
    "python3-dbg",
    "python3-pytest",
    "python3-numpy",
    "build-essential",
    "cmake",
    "ninja-build",
    "make",
    "clang-18",
    "libc++abi-18-dev",
    "libc++-18-dev",
    "lldb-18",
    "gdb",
    "bsdmainutils",
    "procps",
    "jq",
    "curl",
    "vim",
    "git",
    "gosu",
    "ripgrep",
    "sudo",
    "fd-find",
]
pip = []
npm = []
custom = []

# CLAUDE: example of specifying a command. This can be run with `claudepod claude`
[cmd.claude]
install = '''
RUN mkdir -p /home/code/.npm-global && \
    npm config set prefix /home/code/.npm-global && \
    npm install --silent -g @anthropic-ai/claude-code
'''
args = "--dangerously-skip-permissions --max-turns 99999999"

# CLAUDE: this will be a special command that is run when calling `claudepod`,
# and should be able to reference other commands. All commands can either
# specify the command as above, or reference another command.
[cmd]
default = "claude"


[dependencies.nodejs]
enabled = true
version = "18"
source = "nodesource"

[dependencies.github_cli]
enabled = true

[shell]
history_search = true

[shell.aliases]
n = "ninja"
